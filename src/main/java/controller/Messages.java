package controller;

import controller.Response.StatusCode;

import java.io.BufferedReader;
import java.io.FileReader;
import java.io.IOException;
import java.util.Arrays;

/**
 * Created by kaspar on 29.04.18.
 */
public final class Messages {


    static final int[] OK =  { 0x2f, 0x41, 0x30, 0x30, 0x43, 0x43, 0x45, 0x36, 0x0d };       // /A00CCE6.
    static final int[] BOK = { 0x2f, 0x41, 0x30, 0x30, 0x43, 0x50, 0x46, 0x33, 0x0d };       // /A00CPF3.

    static final int[] IDENTIFY = { 0x2f, 0x30, 0x30, 0x49, 0x44, 0x45, 0x44, 0x0d };       // /00IDED.
    static final int[] RESET = { 0x2f, 0x30, 0x30, 0x43, 0x43, 0x45, 0x32, 0x42, 0x0d };    // /00CCE2B.
    static final int[] STOP = { 0x2f, 0x30, 0x30, 0x43, 0x43, 0x53, 0x33, 0x39, 0x0d };     // /00CCS39.
    static final int[] RUN = { 0x2f, 0x30, 0x30, 0x43, 0x43, 0x52, 0x33, 0x38, 0x0d };      // /00CCR38.
    static final int[] PLC_STATUS = {
            0x2f, 0x5f, 0x4f, 0x50, 0x4c, 0x43, 0x00, 0xfe, 0x01, 0x00, 0x00, 0x00,                // /_OPLC............j.......\
            0x07, 0x00, 0x00, 0x00, 0x00, 0x00, 0x6a, 0x00, 0x00, 0x00, 0xd4, 0xfc,
            0x00, 0x00, 0x5c
    };

    static final int[] B2400 =   { 0x2f, 0x30, 0x30, 0x43, 0x50, 0x43, 0x31, 0x54, 0x30, 0x35, 0x46, 0x46, 0x46, 0x46, 0x33, 0x38, 0x0d };   // /00CPC1T05FFFF38.
    static final int[] B4800 =   { 0x2f, 0x30, 0x30, 0x43, 0x50, 0x43, 0x31, 0x54, 0x30, 0x36, 0x46, 0x46, 0x46, 0x46, 0x33, 0x39, 0x0d };   // /00CPC1T06FFFF39.
    static final int[] B9600 =   { 0x2f, 0x30, 0x30, 0x43, 0x50, 0x43, 0x31, 0x54, 0x30, 0x37, 0x46, 0x46, 0x46, 0x46, 0x33, 0x41, 0x0d };   // /00CPC1T07FFFF3A.
    static final int[] B19200 =  { 0x2f, 0x30, 0x30, 0x43, 0x50, 0x43, 0x31, 0x54, 0x30, 0x38, 0x46, 0x46, 0x46, 0x46, 0x33, 0x42, 0x0d };   // /00CPC1T08FFFF3B.
    static final int[] B38400 =  { 0x2f, 0x30, 0x30, 0x43, 0x50, 0x43, 0x31, 0x54, 0x30, 0x39, 0x46, 0x46, 0x46, 0x46, 0x33, 0x43, 0x0d };   // /00CPC1T09FFFF3C.
    static final int[] B57600 =  { 0x2f, 0x30, 0x30, 0x43, 0x50, 0x43, 0x31, 0x54, 0x30, 0x41, 0x46, 0x46, 0x46, 0x46, 0x34, 0x34, 0x0d };   // /00CPC1T0AFFFF44.
    static final int[] B115200 = { 0x2f, 0x30, 0x30, 0x43, 0x50, 0x43, 0x31, 0x54, 0x30, 0x42, 0x46, 0x46, 0x46, 0x46, 0x34, 0x35, 0x0d };   // /00CPC1T0BFFFF45.

    static final int NUM_OF_REQUESTS = 64;
    static int[][] REQUESTS;
    static int[][] RESPONSES;

    static final int IDENTIFY_RESPONSE_LEN = 63;
    static final int PLC_STATUS_RESPONSE_LEN = 133;

    static StatusCode readMessages() {
        if (REQUESTS != null && RESPONSES != null) return StatusCode.OK;
        REQUESTS = new int[NUM_OF_REQUESTS][];
        RESPONSES = new int[NUM_OF_REQUESTS][];
        try {
            BufferedReader reader = new BufferedReader(new FileReader("/home/kaspar/Desktop/COMproov/src/main/java/controller/stop_download_restart.txt"));
            String line;
            int index = 0;
            while ((line = reader.readLine()) != null) {
                String[] splitted = line.split(" --> ");
                REQUESTS[index] = Arrays.stream(splitted[0].split(", ")).mapToInt(c -> Integer.parseInt(c.substring(2), 16)).toArray();
                RESPONSES[index] = Arrays.stream(splitted[1].split(", ")).mapToInt(c -> Integer.parseInt(c.substring(2), 16)).toArray();
                index++;
            }
        } catch (IOException e) {
            return StatusCode.ERROR;
        }
        return StatusCode.OK;
    }



}